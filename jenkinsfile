pipeline{
    agent any
    tools {maven "maven"}
    stages {
        stage('clone git') {
          steps{
            git branch: 'main', credentialsId: 'edc43311-5408-4645-8be5-df7162b7f887', url: 'https://github.com/nagadurga8/spring-petclinic.git'
          }
        }
          stage('Build') {
              steps {
                  sh 'mvn clean package'
                  
              }
          }
          stage('sonarqube') {
            steps {
             sh 'mvn clean verify sonar:sonar \
                -Dsonar.projectKey=petclinic \
                -Dsonar.host.url=http://54.165.174.236:9000 \
                -Dsonar.login=sqp_9e200dbe6b081c0995427414f0fac96bd132017e'
            
            }
          }
    }
}